{% extends "base.html" %}

{% block content %}

<div class="form-container">

  <h2 class="form-section-title">Update Application</h2>

  <form method="POST" autocomplete="off">

    <!-- Country + University -->

    <div class="cu-row">
      <div class="form-group typeahead" style="max-width: 240px;">
        <label>Country</label>
        <input type="text" name="country_name" value="{{ app['country_name'] }}" required>
      </div>

      <div class="form-group typeahead">
        <label>University Name</label>
        <input type="text" name="university_name" value="{{ app['university_name'] }}" required>
      </div>
    </div>

    <!-- Course + Degree -->
    <div class="form-row c-details">
      <div class="form-group">
        <label>Degree Type</label>
        <select name="degree_type">
          <option value="">Select…</option>
          <option {% if app['degree_type']=='MSc' %}selected{% endif %}>MSc</option>
          <option {% if app['degree_type']=='MEngg' %}selected{% endif %}>MEngg</option>
        </select>
      </div>
      <div class="form-group">
        <label>Course Name</label>
        <input type="text" name="course_name" value="{{ app['course_name'] }}" required>
      </div>
    </div>

    <!-- Course URL -->
    <div class="form-group">
      <label>Course URL</label>
      <input type="text" name="course_url" value="{{ app['course_url'] }}">
    </div>

    <br>

    <!-- Intake + Year + IELTS -->
    <div class="form-row in-details">
      <div class="form-group">
        <label>Intake</label>
        <select name="intake_type">
          <option value="">Select…</option>
          <option {% if app['intake_type']=='Winter' %}selected{% endif %}>Winter</option>
          <option {% if app['intake_type']=='Summer' %}selected{% endif %}>Summer</option>
        </select>
      </div>

      <div class="form-group">
        <label>Intake Year</label>
        <input type="number" name="intake_year" value="{{ app['intake_year'] }}">
      </div>
      <div class="form-group">
        <label>Application Opens</label>
        <input type="date" name="application_open_date" value="{{ app['application_open_date'] }}">
      </div>

      <div class="form-group">
        <label>Deadline</label>
        <input type="date" name="deadline_date" value="{{ app['deadline_date'] }}">
      </div>
    </div>

    <!-- Native Language + Application Mode -->
    <div class="form-row">
      <div class="form-group">
        <label>IELTS Required</label>
        <input type="text" name="ielts_required" value="{{ app['ielts_required'] }}">
      </div>
      <div class="form-group">
        <label>Native Language</label>
        <input type="text" name="german_required" value="{{ app['german_required'] }}">
      </div>

      <div class="form-group">
        <label>Application Mode</label>
        <select name="application_mode">
          <option value="">Select…</option>
          <option {% if app['application_mode'] == 'College-Portal' %}selected{% endif %}>College-Portal</option>
          <option {% if app['application_mode'] == 'UniAssist' %}selected{% endif %}>UniAssist</option>
          <option {% if app['application_mode'] == 'Other' %}selected{% endif %}>Other</option>
        </select>
      </div>
    </div>

    <!-- Submission Status -->
    <div class="form-row">
      <div class="form-group" style="max-width: 260px;">
        <label>Status</label>
        <select name="status">
          <option {% if app['status']=='shortlisted' %}selected{% endif %}>shortlisted</option>
          <option {% if app['status']=='preparing' %}selected{% endif %}>preparing</option>
          <option {% if app['status']=='submitted' %}selected{% endif %}>submitted</option>
          <option {% if app['status']=='admitted' %}selected{% endif %}>admitted</option>
          <option {% if app['status']=='rejected' %}selected{% endif %}>rejected</option>
        </select>
      </div>
    </div>

    <!-- Submission & Decision Date -->
    <div class="form-row">
      <div class="form-group">
        <label>Date Submitted</label>
        <input type="date" name="date_submitted" value="{{ app['date_submitted'] }}">
      </div>

      <div class="form-group">
        <label>Decision Date</label>
        <input type="date" name="decision_date" value="{{ app['decision_date'] }}">
      </div>
    </div>
    <div class="form-group">
        <label>Extra Requirements</label>
        <textarea name="extra_requirements"></textarea>
    </div>

    <!-- Form Actions -->
    <div class="form-row" style="margin-top: 1rem;">
      <button type="submit" class="btn btn-primary">Save Changes</button>
      <a href="{{ url_for('application_details', app_id=app['app_id']) }}" class="btn btn-outline">Cancel</a>
    </div>

  </form>

</div>

{% endblock %}
